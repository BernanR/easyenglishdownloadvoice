const indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;var applicationStart=function(e){var t;e&&(t={save:function(t,n){e.transaction(["sentences"],"readwrite").objectStore("sentences").add(t).onsuccess=(e=>{n()})},list:function(t){var n=e.transaction(["sentences"]).objectStore("sentences").getAll();n.onsuccess=(e=>{t(n.result)})},delete:function(t,n){e.transaction(["sentences"],"readwrite").objectStore("sentences").delete(t).onsuccess=(e=>{n()})}}).list(function(e){e.forEach(e=>{i(e.text,e.url)})});$(".link").on("click",function(){let e=n();return window.open(e,"_blank"),!1}),$(".btn-save").on("click",function(){let e=n(),o=$(".text").val();t.save({url:e,text:o},function(){i(o,e)})});let n=function(){return`https://translate.google.com/translate_tts?ie=UTF-8&q=${$(".text").val().split(" ").join("%20")}.&tl=en&total=1&idx=0&textlen=15&tk=350535.255567&client=webapp&prev=input`},o=function(e){$(".link").attr("disabled",e),$(".btn-save").attr("disabled",e)},i=function(e,n){let o=$(".ls-voice-cont"),i=$(`\n        <li>\n            <p class="text-voice">${e}</p>\n            <audio controls>\n                <source src="${n}" type="audio/mpeg">\n                Your browser does not support the audio element.\n            </audio>\n            <button type="button" class="btn btn-light btn-delete" data-toggle="tooltip" data-placement="top" title="Remover from saved">\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">\n                    <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/>\n                </svg>\n            </button>\n        </li>\n    `);o.prepend(i),$('[data-toggle="tooltip"]').tooltip();let a=$(i).find("button");$(a).on("click",function(){t.delete(n,function(){i.remove(),$(".bs-tooltip-top").removeClass("show")})})};o(!0),setInterval(function(){$(".text").val().length>0?o(!1):o(!0)},50)};if(indexedDB){const e=indexedDB.open("EasyEnglishVoiceDownload",1);e.onerror=function(e){$(".btn-save").remove()},e.onupgradeneeded=function(){db=e.result,db.createObjectStore("sentences",{keyPath:"url"}).createIndex("sentences_url",["url"],{unique:!0})},e.onsuccess=function(){const t=e.result;applicationStart(t)}}else $(".btn-save").remove(),applicationStart(null);localStorage.getItem("CookieAccept")&&$("footer").remove(),$(".cookieBarConsentButton").on("click",function(){localStorage.setItem("CookieAccept",!0),$("footer").remove()});